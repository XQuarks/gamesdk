{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ec3783a3_3bac88a8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1715047
      },
      "writtenOn": "2022-03-16T14:57:12Z",
      "side": 1,
      "message": "General comment: I think the loading from cloud needs to be relocated to better handle the async nature. There is a loader_scene that gets launched at startup before going to the initial menu screen. Game data loading could happen there with the following flow:\n\n1. Condition of: savedata_loading_complete is set to false on loader_scene startup\n2. Local device save file is loaded if available, checkpoint level is initialized to zero if not.\n3. If cloud is not available, set the savedata_loading_complete set to true\n4. If cloud is available, attempt to load cloud data. This should be async with a native callback function. I\u0027m fine with just declaring a JNI interface native function with a status parameter and a level number parameter, i.e. com_google_sample_agdktunnel_PGSManager_cloudLoadResult(JNIEnv *env, jint result, jint level)\n5. If a cloud load comes back successful, update the checkpoint and save the local device save file, and set savedata_loading_complete to true.\n6. If the cloud load comes back unsuccessful, log the status result, and set savedata_loading_complete to true\n7. savedata_loading_complete being true is an additional required exit condition to transition out of the loader_scene\n\nOn the save side, the cloud save function can just be \u0027fire and forget\u0027, as long as the local device save happens at the same time.",
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77c8f40a_b1adbee1",
        "filename": "samples/agdktunnel/app/src/main/cpp/native_engine.cpp",
        "patchSetId": 3
      },
      "lineNbr": 325,
      "author": {
        "id": 1044844
      },
      "writtenOn": "2022-03-16T15:12:47Z",
      "side": 1,
      "message": "nit: invert condition and return earlier\ngo/c-readability-advice#avoid-unnecessary-nesting-by-using-early-returns",
      "range": {
        "startLine": 325,
        "startChar": 4,
        "endLine": 325,
        "endChar": 39
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "53cf84e5_4a01bf03",
        "filename": "samples/agdktunnel/app/src/main/cpp/native_engine.cpp",
        "patchSetId": 3
      },
      "lineNbr": 325,
      "author": {
        "id": 1935817
      },
      "writtenOn": "2022-03-22T23:48:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77c8f40a_b1adbee1",
      "range": {
        "startLine": 325,
        "startChar": 4,
        "endLine": 325,
        "endChar": 39
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01ef131f_f29f403b",
        "filename": "samples/agdktunnel/app/src/main/cpp/native_engine.cpp",
        "patchSetId": 3
      },
      "lineNbr": 337,
      "author": {
        "id": 1044844
      },
      "writtenOn": "2022-03-16T15:12:47Z",
      "side": 1,
      "message": "nit: ditto",
      "range": {
        "startLine": 337,
        "startChar": 4,
        "endLine": 337,
        "endChar": 39
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "998bf549_fa33bfae",
        "filename": "samples/agdktunnel/app/src/main/cpp/native_engine.cpp",
        "patchSetId": 3
      },
      "lineNbr": 337,
      "author": {
        "id": 1935817
      },
      "writtenOn": "2022-03-22T23:48:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "01ef131f_f29f403b",
      "range": {
        "startLine": 337,
        "startChar": 4,
        "endLine": 337,
        "endChar": 39
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1358bfb_0e4b4f98",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/AGDKTunnelActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 95,
      "author": {
        "id": 1580900
      },
      "writtenOn": "2022-03-15T22:03:42Z",
      "side": 1,
      "message": "move the public method up.",
      "range": {
        "startLine": 92,
        "startChar": 4,
        "endLine": 95,
        "endChar": 5
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf02d9bd_f40f2d24",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/AGDKTunnelActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 95,
      "author": {
        "id": 1935817
      },
      "writtenOn": "2022-03-22T23:48:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a1358bfb_0e4b4f98",
      "range": {
        "startLine": 92,
        "startChar": 4,
        "endLine": 95,
        "endChar": 5
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d0e57a8a_00c8699d",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/AGDKTunnelActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 97,
      "author": {
        "id": 1580900
      },
      "writtenOn": "2022-03-15T22:03:42Z",
      "side": 1,
      "message": "This function is not called yet? Or did I miss the caller?",
      "range": {
        "startLine": 97,
        "startChar": 20,
        "endLine": 97,
        "endChar": 38
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69a645f5_b945f944",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/AGDKTunnelActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 97,
      "author": {
        "id": 1935817
      },
      "writtenOn": "2022-03-15T22:28:09Z",
      "side": 1,
      "message": "It is called from loadCloudCheckpoint() and saveCloudCheckpoint, these are called from c++ side using JNI",
      "parentUuid": "d0e57a8a_00c8699d",
      "range": {
        "startLine": 97,
        "startChar": 20,
        "endLine": 97,
        "endChar": 38
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8869a05a_c29a5153",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/AGDKTunnelActivity.java",
        "patchSetId": 3
      },
      "lineNbr": 97,
      "author": {
        "id": 1935817
      },
      "writtenOn": "2022-03-22T23:48:07Z",
      "side": 1,
      "message": "Marked as fixed because the method was removed since it was no longer needed",
      "parentUuid": "69a645f5_b945f944",
      "range": {
        "startLine": 97,
        "startChar": 20,
        "endLine": 97,
        "endChar": 38
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54684cf4_e6f1ccab",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/PGSManager.java",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1044844
      },
      "writtenOn": "2022-03-16T15:12:47Z",
      "side": 1,
      "message": "seems progress is liner, so we can use RESOLUTION_POLICY_HIGHEST_PROGRESS and set progress via metadata. This will also simplify the loadCheckpoint.\nSee https://developers.google.com/android/reference/com/google/android/gms/games/snapshot/SnapshotMetadataChange.Builder#setProgressValue(long)",
      "range": {
        "startLine": 63,
        "startChar": 55,
        "endLine": 63,
        "endChar": 95
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90ea2419_768ff305",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/PGSManager.java",
        "patchSetId": 3
      },
      "lineNbr": 121,
      "author": {
        "id": 1580900
      },
      "writtenOn": "2022-03-15T22:03:42Z",
      "side": 1,
      "message": "From what I look, the caller of this function seems to be the main UI thread (GameActivity).",
      "range": {
        "startLine": 110,
        "startChar": 4,
        "endLine": 121,
        "endChar": 17
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e9b4162_f8ebe502",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/PGSManager.java",
        "patchSetId": 3
      },
      "lineNbr": 121,
      "author": {
        "id": 1044844
      },
      "writtenOn": "2022-03-16T15:12:47Z",
      "side": 1,
      "message": "+1, this call may result in the ANR",
      "parentUuid": "90ea2419_768ff305",
      "range": {
        "startLine": 110,
        "startChar": 4,
        "endLine": 121,
        "endChar": 17
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "387875b9_1c7c112f",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/PGSManager.java",
        "patchSetId": 3
      },
      "lineNbr": 121,
      "author": {
        "id": 1935817
      },
      "writtenOn": "2022-03-22T23:48:07Z",
      "side": 1,
      "message": "Fixed.\n\nLoading data now is fully asynchronous",
      "parentUuid": "8e9b4162_f8ebe502",
      "range": {
        "startLine": 110,
        "startChar": 4,
        "endLine": 121,
        "endChar": 17
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "059d35f3_ac27bc94",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/PGSManager.java",
        "patchSetId": 3
      },
      "lineNbr": 132,
      "author": {
        "id": 1044844
      },
      "writtenOn": "2022-03-16T15:12:47Z",
      "side": 1,
      "message": "don\u0027t forget to discard the snapshot once it is not needed. See https://developers.google.com/android/reference/com/google/android/gms/games/SnapshotsClient#public-abstract-taskvoid-discardandclose-snapshot-snapshot",
      "range": {
        "startLine": 132,
        "startChar": 0,
        "endLine": 132,
        "endChar": 8
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f4e136dd_b6fdbb4a",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/PGSManager.java",
        "patchSetId": 3
      },
      "lineNbr": 132,
      "author": {
        "id": 1935817
      },
      "writtenOn": "2022-03-23T19:14:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "059d35f3_ac27bc94",
      "range": {
        "startLine": 132,
        "startChar": 0,
        "endLine": 132,
        "endChar": 8
      },
      "revId": "0a938316e0965332ddfc748ad98d58e24d1a3f0f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}