{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "902486d6_b7a1779f",
        "filename": "samples/agdktunnel/app/src/main/java/com/google/sample/agdktunnel/AGDKTunnelActivity.java",
        "patchSetId": 14
      },
      "lineNbr": 84,
      "author": {
        "id": 1935817
      },
      "writtenOn": "2022-03-28T15:15:46Z",
      "side": 1,
      "message": "Options for handle onResume() lifeycle event are\n\nFirst option:\n\n```\n// AGDKTunnelActivity.onCreate()\nif (isPlayGamesServicesLinked()) {\n  // Initialize Play Games Services\n  mPGSManager \u003d new PGSManager(this);\n  getLifecycle().addObserver(mPGSManager);\n}\n```\n\n```\npublic class PGSManager implements DefaultLifecycleObserver {\n  @Override\n  public void onResume(LifecycleOwner owner) {\n    ...\n  }\n}\n```\n\nWith dependency\nimplementation \u0027androidx.lifecycle:lifecycle-runtime:2.4.1\u0027\nWhich requires to upgrade compileSdkVersion from 30 to 31, and is something we may not want to upgrade\n\nSecond option:\n\n```\n// AGDKTunnelActivity.onCreate()\nif (isPlayGamesServicesLinked()) {\n  // Initialize Play Games Services\n  mPGSManager \u003d new PGSManager(this);\n  getLifecycle().addObserver(mPGSManager);\n}\n```\n\n```\npublic class PGSManager implements DefaultLifecycleObserver {\n  @Override\n  public void onStateChanged(@NonNull LifecycleOwner source, @NonNull Lifecycle.Event event) {\n      if (event \u003d\u003d Lifecycle.Event.ON_RESUME) {\n          ...\n      }\n  }\n}\n```\n\nWith dependency\nimplementation \u0027androidx.lifecycle:lifecycle-runtime:2.3.1\u0027\nDo not requires to update to compileSdkVersion 31, but a runtime error happens on the JNI + PGS side that crashes the app quite often.\n\nHere logs: https://paste.googleplex.com/5103602008850432 (I am not sure why it says that addObserver is being called in a thread different than main)",
      "range": {
        "startLine": 80,
        "startChar": 8,
        "endLine": 84,
        "endChar": 9
      },
      "revId": "f52620abba70c6b934c9b4a2fce472fc771d029b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}